---
title: "마커 클러스터링"
description: "네이버 지도에서 제공하는 마커 클러스터링 기능 사용법"
---

import { Callout } from 'fumadocs-ui/components/callout'

# 마커 클러스터링

네이버 지도 라이브러리에서 제공하는 내장 마커 클러스터링 기능을 사용하여 많은 수의 마커를 효율적으로 표시할 수 있습니다.

<Callout type="info">
  마커 클러스터링은 지도 상의 가까운 거리에 있는 여러 마커들을 하나의 클러스터로 묶어 표시하는 기법입니다.
  네이버 지도 라이브러리는 이 기능을 네이티브 레벨에서 지원하므로 별도의 외부 라이브러리가 필요하지 않습니다.
</Callout>

## 기본 클러스터링 구현

네이버 지도의 클러스터링은 `NaverMapView` 컴포넌트의 `clusters` 속성을 통해 설정할 수 있습니다.

### 1. ClusterMarkerProp 타입 정의

클러스터에 포함될 각 마커는 `ClusterMarkerProp` 타입을 준수해야 합니다:

```tsx
import type { ClusterMarkerProp } from '@mj-studio/react-native-naver-map';

const clusterMarkers: ClusterMarkerProp[] = [
  {
    identifier: 'marker-1',
    latitude: 37.5665,
    longitude: 126.9780,
    image: { symbol: 'red' }, // 또는 { httpUri: 'https://...' }, { assetName: 'marker' } 등
    width: 40,
    height: 40,
  },
  {
    identifier: 'marker-2',
    latitude: 37.5675,
    longitude: 126.9785,
    image: { symbol: 'blue' },
    width: 40,
    height: 40,
  },
  // ... 더 많은 마커들
];
```

### 2. 기본 클러스터링 구현

```tsx
import React, { useState, useMemo } from 'react';
import { View } from 'react-native';
import { NaverMapView, type ClusterMarkerProp } from '@mj-studio/react-native-naver-map';

const ClusteredMapExample = () => {
  // 마커 데이터 생성
  const clusterMarkers = useMemo<ClusterMarkerProp[]>(() => {
    return generateMarkerData().map((marker, index) => ({
      identifier: `marker-${index}`,
      latitude: marker.latitude,
      longitude: marker.longitude,
      image: { httpUri: `https://picsum.photos/32/32?random=${index}` },
      width: 32,
      height: 32,
    }));
  }, []);

  // 클러스터 설정
  const clusters = useMemo(() => [
    {
      width: 50,          // 클러스터 마커의 너비
      height: 50,         // 클러스터 마커의 높이
      markers: clusterMarkers,
      screenDistance: 40, // 클러스터링 기준 화면 거리 (픽셀)
      minZoom: 5,         // 클러스터링할 최소 줌 레벨
      maxZoom: 18,        // 클러스터링할 최대 줌 레벨
      animate: true,      // 클러스터 펼침/합침 애니메이션
    }
  ], [clusterMarkers]);

  return (
    <NaverMapView
      style={{ flex: 1 }}
      initialCamera={{
        latitude: 37.5665,
        longitude: 126.9780,
        zoom: 10,
      }}
      clusters={clusters}
      onTapClusterLeaf={({ markerIdentifier }) => {
        console.log('마커 클릭됨:', markerIdentifier);
      }}
    />
  );
};
```

## 고급 클러스터링 설정

### 다중 클러스터 그룹

서로 다른 설정을 가진 여러 클러스터 그룹을 동시에 사용할 수 있습니다:

```tsx
const multiClusters = useMemo(() => [
  {
    // 첫 번째 클러스터 그룹 - 일반 마커들
    width: 40,
    height: 40,
    markers: regularMarkers,
    screenDistance: 50,
    minZoom: 5,
    maxZoom: 15,
    animate: true,
  },
  {
    // 두 번째 클러스터 그룹 - 특별한 마커들
    width: 60,
    height: 60,
    markers: specialMarkers,
    screenDistance: 80,
    minZoom: 8,
    maxZoom: 20,
    animate: false,
  }
], [regularMarkers, specialMarkers]);
```

## 클러스터 이벤트 처리

### 개별 마커 클릭 이벤트

클러스터에 포함된 개별 마커가 클릭되었을 때의 이벤트를 처리할 수 있습니다:

```tsx
<NaverMapView
  clusters={clusters}
  onTapClusterLeaf={({ markerIdentifier }) => {
    // markerIdentifier를 사용하여 해당 마커의 상세 정보 표시
    const markerData = findMarkerById(markerIdentifier);
    showMarkerDetail(markerData);
  }}
/>
```

## Props

`ClusterMarkerProp`

<AutoTypeTable path="../src/types/ClusterMarkerProp.ts" name="ClusterMarkerProp" />
