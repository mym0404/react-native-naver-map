---
title: "위치 권한 설정"
description: "위치 권한 설정 문서"
---

위치 권한 설정

React Native Naver Map에서 사용자의 현재 위치를 표시하려면 위치 권한 설정이 필요합니다.

<Callout type="info">
  지도 표시만 필요한 경우에는 위치 권한이 필요하지 않습니다.
  사용자의 현재 위치를 표시하거나 위치 추적 기능을 사용할 때만 필요합니다.
</Callout>

## 권한 관리 라이브러리

기본적으로 앱에서 권한은 직접 관리되어야 합니다. 권한 관리를 위해 다음 라이브러리들을 사용할 수 있습니다:

- **Bare React Native**: [react-native-permissions](https://github.com/zoontek/react-native-permissions)
- **Expo**: [expo-location](https://docs.expo.dev/versions/latest/sdk/location/)

<Callout type="tip">
  Expo 사용자라면 expo-location의 사용법을 따르는 것이 더 간단합니다.
  아래 내용 중 필요한 권한이 무엇인지 확인한 후 expo-location 문서를 참고하세요.
</Callout>

## react-native-permissions 설정



## 패키지 설치



<Tabs items={['npm', 'yarn', 'pnpm']}>
  <Tab value="Basic">
    ```bash
    npm install react-native-permissions
    ```
  </Tab>
  <Tab value="Basic">
    ```bash
    yarn add react-native-permissions
    ```
  </Tab>
  <Tab value="Basic">
    ```bash
    pnpm add react-native-permissions
    ```
  </Tab>
</Tabs>

각 플랫폼별 설정 방법은 [공식 문서](https://github.com/zoontek/react-native-permissions#setup)를 참고하여 `Podfile(iOS)`, `AndroidManifest.xml(Android)`를 적절히 변경해주세요.

## iOS 권한 설정



## 권한 종류



iOS에서는 다음 세 가지 위치 권한이 관련되어 있습니다:



## NSLocationAlwaysAndWhenInUseUsageDescription (iOS 11+)


- 앱이 foreground와 background 모두에서 위치 정보에 액세스하는 것을 허용
- iOS 11 이상에서는 NSLocationAlwaysUsageDescription 대신 이 키를 사용



## NSLocationWhenInUseUsageDescription


- 앱이 foreground에 있을 때만 위치 정보에 액세스하는 것을 허용
- 사용자가 앱을 활발히 사용 중일 때만 위치 정보 접근 가능



## NSLocationTemporaryUsageDescriptionDictionary (iOS 14+)


- 앱이 임시로 정확한 위치 정보에 액세스할 수 있도록 허용
- 특정 작업을 수행하는 동안에만 정확한 위치가 필요한 경우 사용

<Callout type="tip">
  iOS 11 미만의 기기를 지원하지 않는다면 NSLocationAlwaysUsageDescription은 설정하지 않아도 됩니다.
</Callout>



## Podfile 설정



```ruby title="ios/Podfile"
setup_permissions([
  'LocationAccuracy',
  'LocationAlways',
  'LocationWhenInUse',
  # ... 다른 권한들
])
```



## 백그라운드 위치 업데이트 설정



백그라운드에서 위치를 받아오려면:




## Xcode에서 프로젝트 선택




## Signing & Capabilities 탭으로 이동




## Background Modes 추가




## Location updates 옵션 체크




![Xcode config result](https://raw.githubusercontent.com/mym0404/image-archive/master/202404161737676.webp)

## Android 권한 설정



## 자동 권한 요청



Naver Map SDK의 `FusedLocationSource`는 `isShowLocationButton` prop을 `true`로 설정하면 자동으로 권한을 요청합니다.

```tsx
<NaverMapView
  isShowLocationButton={true}
  // ... 다른 props
/>
```



## 권한 종류



AndroidManifest.xml에 다음 권한들을 추가합니다:

```xml title="android/app/src/main/AndroidManifest.xml"
<manifest>
  <!-- 정확한 위치 정보 권한 -->
  <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

  <!-- 대략적인 위치 정보 권한 -->
  <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />

  <!-- 백그라운드 위치 권한 (선택사항) -->
  <uses-permission android:name="android.permission.ACCESS_BACKGROUND_LOCATION" />
</manifest>
```

## 코드에서 권한 요청



## Bare React Native (react-native-permissions)



```tsx title="App.tsx"
import { Platform } from 'react-native';
import {
  PERMISSIONS,
  request,
  requestMultiple,
  requestLocationAccuracy,
} from 'react-native-permissions';

useEffect(() => {
  if (Platform.OS === 'ios') {
    request(PERMISSIONS.IOS.LOCATION_ALWAYS).then((status) => {
      console.log(`Location request status: ${status}`);
      if (status === 'granted') {
        requestLocationAccuracy({
          purposeKey: 'common-purpose', // Info.plist의 purposeKey로 변경
        })
          .then((accuracy) => {
            console.log(`Location accuracy is: ${accuracy}`);
          })
          .catch((e) => {
            console.error(`Location accuracy request has been failed: ${e}`);
          });
      }
    });
  }

  if (Platform.OS === 'android') {
    requestMultiple([
      PERMISSIONS.ANDROID.ACCESS_FINE_LOCATION,
      PERMISSIONS.ANDROID.ACCESS_BACKGROUND_LOCATION,
    ])
      .then((status) => {
        console.log(`Location request status: ${status}`);
      })
      .catch((e) => {
        console.error(`Location request has been failed: ${e}`);
      });
  }
}, []);
```



## Expo (expo-location)



```tsx title="App.tsx"
import * as Location from 'expo-location';

useEffect(() => {
  (async () => {
    try {
      const { granted } = await Location.requestForegroundPermissionsAsync();

      // Note: Foreground 권한이 먼저 승인되어야 Background 권한 요청 가능
      if (granted) {
        await Location.requestBackgroundPermissionsAsync();
      }
    } catch (e) {
      console.error(`Location request has been failed: ${e}`);
    }
  })();
}, []);
```

<Callout type="warn">
  Background 권한은 Foreground 권한이 승인된 후에만 요청할 수 있습니다.
</Callout>

## 권한 상태 확인

권한이 정상적으로 부여되면 다음과 같은 화면이 표시됩니다:

![permission-result-1](https://raw.githubusercontent.com/mym0404/image-archive/master/202404161733072.webp)
![permission-result-2](https://raw.githubusercontent.com/mym0404/image-archive/master/202404161737907.webp)

## 트러블슈팅



## iOS에서 위치 버튼이 표시되지 않는 경우


- Info.plist에 권한 설명이 추가되었는지 확인
- Podfile에 권한 설정이 추가되었는지 확인
- pod install을 다시 실행



## Android에서 권한 요청이 표시되지 않는 경우


- AndroidManifest.xml에 권한이 추가되었는지 확인
- 앱을 완전히 삭제 후 재설치
- 설정 > 앱 > 권한에서 수동으로 권한 부여

<Callout type="info">
  더 자세한 내용은 각 플랫폼의 공식 문서를 참고하세요:
  - [iOS Location Services](https://developer.apple.com/documentation/corelocation)
  - [Android Location Permissions](https://developer.android.com/training/location/permissions)
</Callout>
