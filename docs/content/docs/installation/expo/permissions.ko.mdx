---
title: "권한"
description: "Expo에서 위치 권한 설정 방법"
---

import { Callout } from 'fumadocs-ui/components/callout'

# Expo 권한 설정

Expo 프로젝트에서 위치 권한을 설정하는 방법을 안내합니다.

## Config Plugin에 사용할 권한 선언

```json title="app.json"
{
  "expo": {
    "plugins": [
      [
        "@mj-studio/react-native-naver-map",
        {
          "client_id": "{{Naver Map Client Key}}",
          // (선택사항, expo-location 대신 이 패키지로 설정 가능)
          "android": {
            "ACCESS_FINE_LOCATION": true,
            "ACCESS_COARSE_LOCATION": true,
            "ACCESS_BACKGROUND_LOCATION": true
          },
          // (선택사항, expo-location 대신 이 패키지로 설정 가능)
          "ios": {
            "NSLocationAlwaysAndWhenInUseUsageDescription": "{{ your location usage description }}",
            "NSLocationWhenInUseUsageDescription": "{{ your location usage description }}",
            "NSLocationTemporaryUsageDescriptionDictionary": {
              "purposeKey": "{{ your purpose key }}",
              "usageDescription": "{{ your location usage description }}"
            }
          }
        }
      ]
    ]
  }
}
```

<Callout type="info">
위치 권한 선언은 선택사항입니다. expo-location 패키지를 사용하여 별도로 설정할 수도 있습니다.
</Callout>

## expo-location을 사용하여 런타임 권한 요청

### 1. expo-location 설치

- [expo-location docs](https://docs.expo.dev/versions/latest/sdk/location/)

```bash
npx expo install expo-location
```

### 2. 코드에서 권한 요청

```tsx
import * as Location from 'expo-location';

useEffect(() => {
  (async () => {
    try {
      const {granted} = await Location.requestForegroundPermissionsAsync();
      /**
       * Note: Foreground permissions should be granted before asking for the background permissions
       * (your app can't obtain background permission without foreground permission).
       */
      if(granted) {
        await Location.requestBackgroundPermissionsAsync();
      }
    } catch(e) {
      console.error(`Location request has been failed: ${e}`);
    }
  })();
}, []);
```

### 3. app.json 권한 설정 (expo-location 사용 시)

```json title="app.json"
{
  "expo": {
    "plugins": [
      [
        "expo-location",
        {
          "locationAlwaysAndWhenInUsePermission": "Allow $(PRODUCT_NAME) to use your location.",
          "locationWhenInUsePermission": "Allow $(PRODUCT_NAME) to use your location while you are using the app."
        }
      ]
    ]
  }
}
```

## 권한 종류

### Android 권한

- **`ACCESS_FINE_LOCATION`**: 정확한 위치 정보 접근
- **`ACCESS_COARSE_LOCATION`**: 대략적인 위치 정보 접근
- **`ACCESS_BACKGROUND_LOCATION`**: 백그라운드 위치 정보 접근

### iOS 권한

- **`NSLocationAlwaysAndWhenInUseUsageDescription`**: 항상 및 사용 중 위치 접근
- **`NSLocationWhenInUseUsageDescription`**: 사용 중 위치 접근
- **`NSLocationTemporaryUsageDescriptionDictionary`**: 임시 정확한 위치 접근

## 권한 요청 UI

![permission-result-1](https://raw.githubusercontent.com/mym0404/image-archive/master/202404161733072.webp)
![permission-result-2](https://raw.githubusercontent.com/mym0404/image-archive/master/202404161737907.webp)

<Callout>
[expo-location](https://docs.expo.dev/versions/latest/sdk/location/) 문서를 참고하여 더 자세한 권한 설정 방법을 확인할 수 있습니다.
</Callout>
